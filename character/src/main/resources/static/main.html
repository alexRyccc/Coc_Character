<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="layui/css/layui.css">

    <script type="text/javascript" src="layui/layui.js"></script>
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>创建人物</legend>
</fieldset>


<form action="" id="form1">
    <div class="layui-form-item">
        <label class="layui-form-label">探员编号</label>
        <div class="layui-input-block">
            <input type="text" name="userid"	id="userid" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">探员姓名</label>
        <div class="layui-input-block">
            <input type="text" name="name"	id="name" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">探员年龄</label>
        <div class="layui-input-block">
            <input type="text" name="age"	id="age" class="layui-input">
        </div>
    </div>



    <div class="layui-form-item">
        <label class="layui-form-label">探员性别</label>
        <div class="layui-input-block">
            <select name="sex"  id="sex" size="1">
                    <option value="0">男</option>
                    <option value="1">女</option>
                    <option value="2" selected="">其他</option>

            </select>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">探员职业</label>
        <div class="layui-input-block">
            <select name="profession"  id="profession" size="1">
                <option value="0">工农阶级</option>
                <option value="1">无产阶级</option>
                <option value="2" selected="">军人阶级</option>
                <option value="3">资本家阶级</option>
                <option value="4">科技工作者</option>
                <option value="5">其他</option>

            </select>
        </div>
    </div>



    <button id="btn" class="layui-btn layui-btn-normal" type="button">确认</button>

</form>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>探员小卡片</legend>
</fieldset>



<div>
    <h3><fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;color: #FF5722">个人信息</fieldset></h3>
</div>
<table id="tb1" class="layui-table">
    <thead id="thead1">
    <tr>
        <th>姓名</th>
        <th>年龄</th>
        <th>性别</th>
        <th>性向</th>
        <th>职业</th>
        <th>出生地</th>
        <th>驻地</th>
        <th>专业点</th>
        <th>兴趣点</th>
    </tr>
    </thead>
    <tbody id="tbody1">

    </tbody>
</table>
<div>
    <h3><fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;color: #FF5722">属性值</fieldset></h3>
</div>
<table id="tb2" class="layui-table">
    <thead id="thead2">
    <tr>
        <th>力量</th>
        <th>敏捷</th>
        <th>教育</th>
        <th>体质</th>
        <th>魅力</th>
        <th>意志</th>
        <th>体型</th>
        <th>智力/灵感</th>
        <th>幸运</th>
        <th>CueerentHP/HP</th>
        <th>CueerentMP/MP</th>
        <th>CueerentSAN/SAN</th>
    </tr>
    </thead>
    <tbody id="tbody2">

    </tbody>
</table>
<div>
    <h3><fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;color: #FF5722">技能值（+）</fieldset></h3>
</div>
<table id="tb3" class="layui-table">
    <thead id="thead3">
    <tr>
        <th>技能名</th>
        <th>技能等级</th>
        <th>技能名</th>
        <th>技能等级</th>
        <th>技能名</th>
        <th>技能等级</th>
        <th>技能名</th>
        <th>技能等级</th>
    </tr>
    </thead>
    <tbody id="tbody3">

    </tbody>
</table>

<div>
    <h3><fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;color: #FF5722">个人介绍</fieldset></h3>
</div>
<table id="tb4" class="layui-table">
    <thead id="thead4">
    <tr>
        <th>武器装备</th>
        <th>克苏鲁见识</th>
        <th>重要人物</th>
        <th>害怕/狂热</th>
        <th>背景故事</th>
    </tr>
    </thead>
    <tbody id="tbody4">

    </tbody>
</table>

</body>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="layer/2.4/layer.js"></script>
<script type="text/javascript" src="js/jquery.serializejson.min.js"></script>
<script >


    $(function(){

        $("#btn").on('click',function(e){
            var obj=$('#form1').serializeJSON();//将表单中元素转换为JSON对象
            var pstr=JSON.stringify(obj);//JSON字符串
            console.log("字符串"+pstr)
            $.ajax({
                method:'post',
                url:'/user/create',
                data:pstr,
                success:function(data){
                    alert(data)
                    query()



                },
                dataType:'text',
                contentType:'application/json',
                xhrFileds:{
                    withCredentials:true
                }
            });
        })

    });
    function query() {
        var obj=$('#form1').serializeJSON();//将表单中元素转换为JSON对象
        var pstr=JSON.stringify(obj);//JSON字符串
        console.log("字符串"+pstr)
        $.ajax({
            method:'post',
            url:'/query/person',
            data:pstr,
            success:function(data){
                var data= eval('(' + data + ')');

                var tr='';
                var tr1='';
                var tr2='';
                var tr3='';
                var tr4='';
                var tr5='';
                var tr6='';
                var tr7='';
                var tr8='';
                var tr9='';
                var tr10='';
                var tr11='';
                tr+=`
					<tr>
					<td>${data.name}</td>
					<td>${data.age}</td>
					<td>${data.sex}</td>
					<td>${data.sex}</td>
					<td>${data.profession}</td>
					<td>半人马α座</td>
					<td>中国</td>
					<td>${data.potential}</td>
					<td>${data.interest}</td>
					</tr>
					`
                tr1+=`
					<tr>
					<td>${data.str}</td>
					<td>${data.agl}</td>
					<td>${data.edu}</td>
					<td>${data.phy}</td>
					<td>${data.cha}</td>
					<td>${data.vol}</td>
					<td>${data.bod}</td>
					<td>${data.bra}</td>
					<td>${data.luck}</td>
					<td>${data.currenthp}/${data.hp}</td>
					<td>${data.currentmp}/${data.mp}</td>
					<td>${data.currentsan}/${data.san}</td>
					</tr>
					`
                tr2+=`
					<tr>
					<td>攀爬</td>
					<td>${data.shin}</td>
					<td>游泳</td>
					<td>${data.swim}</td>
					<td>侦查</td>
					<td>${data.spy}</td>
					<td>聆听</td>
					<td>${data.listen}</td>
					</tr>
					`
                tr3+=`
					<tr>
					<td>图书馆使用</td>
					<td>${data.libaray}</td>
					<td>交涉</td>
					<td>${data.negotiate}</td>
					<td>神秘学</td>
					<td>${data.occultism}</td>
					<td>克苏鲁</td>
					<td>${data.cthulhu}</td>
					</tr>
					`
                tr4+=`
					<tr>
					<td>驾驶</td>
					<td>${data.drive}</td>
					<td>战斗</td>
					<td>${data.combat}</td>
					<td>手枪</td>
					<td>${data.gun}</td>
					<td>步械</td>
					<td>${data.gun}</td>
					</tr>
					`
                tr5+=`
					<tr>
					<td>会计</td>
					<td>${data.accountant}</td>
					<td>人类学</td>
					<td>${data.anthropology}</td>
					<td>估价</td>
					<td>${data.evaluate}</td>
					<td>考古学</td>
					<td>${data.archeology}</td>
					</tr>
					`
                tr6+=`
					<tr>
					<td>魅惑</td>
					<td>${data.charm}</td>
					<td>计算机使用</td>
					<td>${data.computer}</td>
					<td>信用</td>
					<td>${data.credit}</td>
					<td>乔装</td>
					<td>${data.dress}</td>
					</tr>
					`
                tr7+=`
					<tr>
					<td>闪避</td>
					<td>${data.dodge}</td>
					<td>电气学</td>
					<td>${data.electrical}</td>
					<td>机械学</td>
					<td>${data.mechanology}</td>
					<td>法律</td>
					<td>${data.law}</td>
					</tr>
					`
                tr8+=`
					<tr>
					<td>锁匠</td>
					<td>${data.locksmith}</td>
					<td>潜行</td>
					<td>${data.sneak}</td>
					<td>医学</td>
					<td>${data.medical}</td>
					<td>外语</td>
					<td>${data.foreign}</td>
					</tr>
					`
                tr9+=`
					<tr>
					<td>领航</td>
					<td>${data.pilot}</td>
					<td>心理学</td>
					<td>${data.psychology}</td>
					<td>追踪</td>
					<td>${data.trace}</td>
					<td>急救</td>
					<td>${data.aid}</td>
					</tr>
					`
                tr10+=`
					<tr>
					<td>重型器械驾驶</td>
					<td>${data.heavy}</td>
					<td>妙手</td>
					<td>${data.steal}</td>
					<td>恐吓</td>
					<td>${data.threaten}</td>
					<td>化学</td>
					<td>${data.chemistry}</td>
					</tr>
					`
                tr11+=`
					<tr>
					<td>自定义</td>
					<td>${data.heavy}</td>
					<td>自定义</td>
					<td>${data.heavy}</td>
					<td>自定义</td>
					<td>${data.heavy}</td>
					<td>自定义</td>
					<td>${data.heavy}</td>
					</tr>
					`
                $('#tbody1').append(tr);
                $('#tbody2').append(tr1);
                $('#tbody3').append(tr2);
                $('#tbody3').append(tr3);
                $('#tbody3').append(tr4);
                $('#tbody3').append(tr5);
                $('#tbody3').append(tr6);
                $('#tbody3').append(tr7);
                $('#tbody3').append(tr8);
                $('#tbody3').append(tr9);
                $('#tbody3').append(tr10);
                $('#tbody3').append(tr11);

            },
            dataType:'text',
            contentType:'application/json',
            xhrFileds:{
                withCredentials:true
            }
        });
    }





</script>

</body>
</html>