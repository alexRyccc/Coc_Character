<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>COC人物注册</title>
    <link rel="stylesheet" type="text/css" href="layui/css/layui.css">
    <meta charset="UTF-8">
    <title>用户注册</title>
    <link rel="stylesheet" type="text/css" href="css/login.css">
    <link rel="stylesheet" type="text/css" href="layui/css/layui.css">
    <script type="text/javascript" src="layui/layui.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
</head>
<body>

<div class="site-nav-bg" style="background-color: hsla(0, 0%, 100%, .4);">
    <div class="site-nav w1200">
        <p class="sn-back-home">
            <i class="layui-icon layui-icon-home"></i>
            <a href="#">首页</a>
        </p>
        <div class="sn-quick-menu">
            <div class="login"><a href="sign.html">登录</a></div>
            <div class="sp-cart"><a href="register.html">注册</a></div>
        </div>
    </div>
</div>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>创建人物</legend>
</fieldset>


<form action="" id="form1">
    <div class="layui-form-item">
        <label class="layui-form-label">账号</label>
        <div class="layui-input-block">
            <input type="text" name="username"	id="username" class="layui-input" placeholder="以字母开头,长度在6-12位">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">密码</label>
        <div class="layui-input-block">
            <input type="text" name="password"	id="password" class="layui-input" placeholder="长度控制在6-12位之间">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">手机号</label>
        <div class="layui-input-block">
            <input type="number" name="phone"	id="phone" class="layui-input">
        </div>
    </div>





    <button id="btn" type="button" class="layui-btn" lay-submit="" lay-filter="demo1">确认</button>
    <button type="reset" class="layui-btn layui-btn-primary"><a href="sign.html">取消</a></button>
</form>
</body>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="layer/2.4/layer.js"></script>
<script type="text/javascript" src="js/jquery.serializejson.min.js"></script>
<script >

    $(function(){

        $("#btn").on('click',function(e){
            var obj=$('#form1').serializeJSON();//将表单中元素转换为JSON对象
            var pstr=JSON.stringify(obj);//JSON字符串
            console.log("字符串"+pstr)
            $.ajax({
                method:'post',
                url:'/register/createnew',
                data:pstr,
                success:function(data){
                    alert(data)
                    if(data=='注册成功'){
                        window.location.href="sign.html"
                    }

                },
                dataType:'text',
                contentType:'application/json',
                xhrFileds:{
                    withCredentials:true
                }
            });
        })

    });


</script>


</html>